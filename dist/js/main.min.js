var l;async function b(){if(l)return l;let e=document.createElement("script");return e.src="dist/js/embla-carousel.umd.js",new Promise((r,t)=>{e.onload=()=>{if(l=globalThis.EmblaCarousel||window.EmblaCarousel,!l){t(new Error("EmblaCarousel n'a pas \xE9t\xE9 charg\xE9 correctement"));return}r(l)},e.onerror=()=>{t(new Error("Erreur lors du chargement d'Embla Carousel"))},document.head.appendChild(e)})}async function L(){let e=document.querySelector(".embla");if(e)try{let t=(await b())(e,{align:"start",slidesToScroll:1}),n=document.querySelector(".carousel__dots"),o=document.querySelector(".carousel__button--prev"),s=document.querySelector(".carousel__button--next"),i=[],m=()=>{if(!n)return;n.innerHTML=t.scrollSnapList().map((a,d)=>`<button class="carousel__dot" type="button" aria-label="Aller \xE0 la slide ${d+1}"></button>`).join("");let c=a=>{t.scrollTo(a)};i=Array.from(n.querySelectorAll(".carousel__dot")),i.forEach((a,d)=>{a.addEventListener("click",()=>c(d),!1)})},u=()=>{if(i.length===0)return;let c=t.previousScrollSnap(),a=t.selectedScrollSnap();i[c]&&i[c].classList.remove("carousel__dot--active"),i[a]&&i[a].classList.add("carousel__dot--active")},f=()=>{o&&(o.disabled=!t.canScrollPrev()),s&&(s.disabled=!t.canScrollNext())};t.on("init",m).on("reInit",m).on("init",u).on("reInit",u).on("select",()=>{u(),f()}),o&&o.addEventListener("click",()=>t.scrollPrev()),s&&s.addEventListener("click",()=>t.scrollNext()),f()}catch(r){console.error("Erreur lors du chargement d'Embla Carousel:",r)}}var _=L;var v="google_reviews";var S="api/google-reviews-proxy.php";function C(){try{let e=localStorage.getItem(v);if(!e)return null;let r=JSON.parse(e);return Date.now()-r.timestamp<36e5?r.reviews:(localStorage.removeItem(v),null)}catch{return null}}function x(e){try{localStorage.setItem(v,JSON.stringify({timestamp:Date.now(),reviews:e}))}catch{}}function $(e){let t=Date.now()-e*1e3,n=Math.floor(t/(1e3*60*60*24));if(n===0)return"Aujourd'hui";if(n===1)return"Hier";if(n<7)return`Il y a ${n} jours`;if(n<30){let o=Math.floor(n/7);return`Il y a ${o} semaine${o>1?"s":""}`}else{if(n<365)return`Il y a ${Math.floor(n/30)} mois`;{let o=Math.floor(n/365);return`Il y a ${o} an${o>1?"s":""}`}}}function p(e){let r=Math.floor(e),t=e%1>=.5,n="";for(let s=0;s<r;s++)n+='<svg class="review__star" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>';t&&(n+='<svg class="review__star" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" fill-opacity="0.5"/></svg>');let o=5-r-(t?1:0);for(let s=0;s<o;s++)n+='<svg class="review__star" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>';return n}function T(e){return`<svg class="review__avatar" width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="#5E1D0B" opacity="0.2"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#5E1D0B" font-size="18" font-weight="bold" font-family="Arial, sans-serif">${e.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2)}</text></svg>`}function h(e){let r=document.querySelector(".reviews__list");if(!r)return;if(!e||!e.reviews||e.reviews.length===0){r.innerHTML='<div class="reviews__empty">Soyez le premier \xE0 laisser un avis</div>';return}let t=e.reviews.slice(0,5),n="";t.forEach(o=>{let s=o.profile_photo_url?`<img src="${o.profile_photo_url}" alt="${o.author_name}" class="review__avatar" loading="lazy" width="48" height="48">`:T(o.author_name);n+=`
			<article class="review">
				<div class="review__header">
					${s}
					<div>
						<div class="review__author">${o.author_name}</div>
						<div class="review__date">${$(o.time)}</div>
					</div>
				</div>
				<div class="review__rating" aria-label="Note: ${o.rating} sur 5">
					${p(o.rating)}
				</div>
				<p class="review__text">${o.text}</p>
			</article>
		`}),r.innerHTML=n}function w(e){let r=document.querySelector(".reviews__summary");if(!r)return;let t=e.rating||0,n=e.user_ratings_total||0,o=p(t);r.innerHTML=`
		<img src="https://www.google.com/favicon.ico" alt="Google" class="reviews__google-logo" width="32" height="32">
		<div class="reviews__rating">
			<span class="reviews__rating-value">${t.toFixed(1)}</span>
			<div class="reviews__stars" aria-label="${t} sur 5 \xE9toiles">
				${o}
			</div>
		</div>
		<div class="reviews__count">${n} avis</div>
	`}function M(){let e=document.querySelector(".reviews__list");e&&(e.innerHTML='<div class="reviews__loading"><div class="reviews__spinner" aria-label="Chargement des avis"></div></div>')}function A(){let e=document.querySelector(".reviews__list");e&&(e.innerHTML='<div class="reviews__error">Avis temporairement indisponibles</div>')}async function D(){try{let e=await fetch(S);if(!e.ok)throw new Error("Erreur r\xE9seau");let r=await e.json();if(r.error)throw new Error(r.message);return r}catch(e){throw console.error("Erreur lors du chargement des avis:",e),e}}async function H(){if(!document.querySelector(".reviews"))return;let r=C();if(r){w(r),h(r);return}M();try{let t=await D();x(t),w(t),h(t)}catch{A()}}var g=H;function I(){let e=document.querySelector(".reservation__button");if(!e)return;let r=document.createElement("script");r.src="https://tally.so/widgets/embed.js",r.onload=()=>{window.Tally&&e.addEventListener("click",t=>{t.preventDefault(),window.Tally.openPopup("https://tally.so/r/3lP81W",{layout:"modal",width:640,alignLeft:!1,hideTitle:!1,overlay:!0})})},document.head.appendChild(r)}var y=I;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",E):E();function E(){_(),g(),y()}
